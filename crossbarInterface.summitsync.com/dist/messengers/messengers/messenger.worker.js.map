{"version":3,"sources":["messengers/messengers/messenger.worker.js"],"names":["instance","Worker","onSuccess","onError","_init","sharedWorker","SharedWorker","port","onmessage","msg","_onSuccess","data","onerror","err","_onError","postMessage","MessengerInterface"],"mappings":";;;;;;;;AAAA;;;;;;;;;;;;AAEA,IAAIA,WAAW,IAAf;;IACqBC,M;;;AACjB,sBAAwD;AAAA,YAA5CC,SAA4C,uEAAhC,YAAM,CAAG,CAAuB;;AAAA;;AAAA,YAArBC,OAAqB,uEAAX,YAAM,CAAG,CAAE;;AAAA;;AACpD,YAAI,CAACH,QAAL,EAAe;AAAA,wHACLE,SADK,EACMC,OADN;;AAEX,kBAAKC,KAAL;AACAJ;AACH;AACD,sBAAOA,QAAP;AACH;;;;gCAEO;AAAA;;AACJ,iBAAKK,YAAL,GAAoB,IAAIC,YAAJ,CAAiB,6CAAjB,CAApB;AACA,iBAAKD,YAAL,CAAkBE,IAAlB,CAAuBC,SAAvB,GAAmC,UAACC,GAAD,EAAS;AACxC,uBAAKC,UAAL,CAAgBD,IAAIE,IAApB;AACH,aAFD;AAGA,iBAAKN,YAAL,CAAkBO,OAAlB,GAA4B,UAACC,GAAD,EAAS;AACjC,uBAAKC,QAAL,CAAcD,GAAd;AACH,aAFD;AAGH;;;mCAEUF,I,EAAM;AACb,iBAAKT,SAAL,CAAeS,IAAf;AACH;;;iCAEQE,G,EAAK;AACV,iBAAKV,OAAL,CAAaU,GAAb;AACH;;;6BAEIJ,G,EAAK;AACN,iBAAKJ,YAAL,CAAkBE,IAAlB,CAAuBQ,WAAvB,CAAmCN,GAAnC;AACH;;;;EA9B+BO,oB;;kBAAff,M","file":"messenger.worker.js","sourcesContent":["import MessengerInterface from '../messengers.interface';\n\nvar instance = null;\nexport default class Worker extends MessengerInterface {\n    constructor(onSuccess = () => { }, onError = () => { }) {\n        if (!instance) {\n            super(onSuccess, onError);\n            this._init();\n            instance = this;\n        }\n        return instance;\n    }\n\n    _init() {\n        this.sharedWorker = new SharedWorker('dist-resources/workers/worker.shared.js?v=1');\n        this.sharedWorker.port.onmessage = (msg) => {\n            this._onSuccess(msg.data);\n        }\n        this.sharedWorker.onerror = (err) => {\n            this._onError(err);\n        }\n    }\n\n    _onSuccess(data) {\n        this.onSuccess(data);\n    }\n\n    _onError(err) {\n        this.onError(err);\n    }\n\n    send(msg) {\n        this.sharedWorker.port.postMessage(msg);\n    }\n}"]}